var CA;!function(t){var e=function(){function e(e){if(this.target=document.querySelector(e),!this.target)return void console.error("CA: "+e+" is not valid target;");var n=new t.Rule(110);this.control=new t.Controls.Control(this.target,n),this.renderer=new t.Renderer.Renderer(this.target,n);var i=this;this.control.registerEventListener("rule-changed",function(t){i.renderer.setRule(t)}),this.control.registerEventListener("start",function(){i.renderer.start()}),this.control.registerEventListener("stop",function(){i.renderer.stop()}),this.control.registerEventListener("reset",function(){i.renderer.reset()})}return e.prototype.run=function(){},e}();t.App=e}(CA||(CA={}));var CA;!function(t){var e=function(){function e(){this.lastId=0,this.listeners=[]}return e.prototype.registerEventListener=function(e,n){return this.listeners.push(new t.EventListener((this.lastId++),e,n)),this.lastId},e.prototype.removeEventListener=function(t){for(var e=0;e<this.listeners.length;e++)if(this.listeners[e].id===t)return void this.listeners.splice(e,1)},e.prototype.fireEvent=function(t,e){for(var n=0;n<this.listeners.length;n++)"*"!==this.listeners[n].event&&this.listeners[n].event!==t||this.listeners[n].callback(e)},e}();t.EventCreator=e}(CA||(CA={}));var CA;!function(t){var e=function(){function t(t){void 0===t&&(t=0),this.setDecimal(t)}return t.prototype.setDecimal=function(t){this.decimal=t,this.binary=this.fixBinaryLength(this.decimal.toString(2))},t.prototype.setBinary=function(t){this.binary=this.fixBinaryLength(t),this.decimal=parseInt(this.binary,2)},t.prototype.getDecimal=function(){return this.decimal},t.prototype.getBinary=function(){return this.binary},t.prototype.fixBinaryLength=function(t){if(t.length>8)t=t.slice(t.length-8,t.length);else if(t.length<8)for(;t.length<8;)t="0"+t;return t},t}();t.Rule=e}(CA||(CA={}));var __extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},CA;!function(t){var e;!function(e){var n=function(t){function n(n){t.call(this),this.tiles=[],this.parent=n,this.tiles[7]=new e.BinaryInputTile(this.parent,"111"),this.tiles[6]=new e.BinaryInputTile(this.parent,"110"),this.tiles[5]=new e.BinaryInputTile(this.parent,"101"),this.tiles[4]=new e.BinaryInputTile(this.parent,"100"),this.tiles[3]=new e.BinaryInputTile(this.parent,"011"),this.tiles[2]=new e.BinaryInputTile(this.parent,"010"),this.tiles[1]=new e.BinaryInputTile(this.parent,"001"),this.tiles[0]=new e.BinaryInputTile(this.parent,"000");for(var i=this,r=function(t,e){var n=i.tiles.map(function(t){return t.isActive()?"1":"0"}).reverse().join("");i.rule.setBinary(n),i.fireEvent("rule-changed",i.rule)},s=0;s<this.tiles.length;s++)this.tiles[s].registerEventListener("status-changed",r)}return __extends(n,t),n.prototype.setRule=function(t){this.rule=t;for(var e=this.rule.getBinary(),n=0;n<e.length;n++)this.tiles[7-n].setActive("1"===e[n])},n}(t.EventCreator);e.BinaryInput=n}(e=t.Controls||(t.Controls={}))}(CA||(CA={}));var __extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},CA;!function(t){var e;!function(e){var n=function(t){function e(e,n){t.call(this),this.active=!1,this.parent=e,this.value=n,this.target=document.createElement("div"),this.target.id="rule-"+this.value,this.target.classList.add("rule");for(var i=0;i<6;i++){var r=document.createElement("div");r.classList.add("cell"),i<3&&"1"===this.value[i]&&r.classList.add("active"),4===i&&r.classList.add("new"),this.target.appendChild(r)}var s=this;this.target.addEventListener("click",function(){s.setActive(!s.active),s.fireEvent("status-changed",s.active)}),this.parent.appendChild(this.target)}return __extends(e,t),e.prototype.setActive=function(t){this.active=t;var e=this.target.querySelector("div.new");this.active?e.classList.add("active"):e.classList.remove("active")},e.prototype.isActive=function(){return this.active},e}(t.EventCreator);e.BinaryInputTile=n}(e=t.Controls||(t.Controls={}))}(CA||(CA={}));var __extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},CA;!function(t){var e;!function(e){var n=function(t){function n(e,n){t.call(this),this.parent=e,this.rule=n,this.render()}return __extends(n,t),n.prototype.render=function(){this.target=document.createElement("div"),this.target.id="ca-control",this.parent.appendChild(this.target),this.binaryInput=new e.BinaryInput(this.target),this.decimalInput=new e.DecimalInput(this.target),this.runButton=new e.RunButton(this.target);var t=this;this.binaryInput.registerEventListener("rule-changed",function(e){t.rule=e,t.decimalInput.setRule(t.rule),t.fireEvent("rule-changed",t.rule)}),this.decimalInput.registerEventListener("rule-changed",function(e){t.rule=e,t.binaryInput.setRule(t.rule),t.fireEvent("rule-changed",t.rule)}),this.runButton.registerEventListener("*",function(t){console.debug(t)}),this.binaryInput.setRule(this.rule),this.decimalInput.setRule(this.rule)},n}(t.EventCreator);e.Control=n}(e=t.Controls||(t.Controls={}))}(CA||(CA={}));var __extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},CA;!function(t){var e;!function(e){var n=function(t){function e(e){t.call(this),this.parent=e,this.target=document.createElement("div"),this.target.classList.add("decimal"),this.target.innerHTML="Rule: ",this.input=document.createElement("input"),this.input.type="number",this.input.min="0",this.input.max="255",this.target.appendChild(this.input),this.parent.appendChild(this.target);var n=this,i=function(){var t=parseInt(this.value);isNaN(t)||(n.rule.setDecimal(t),n.fireEvent("rule-changed",n.rule))};this.input.addEventListener("change",i),this.input.addEventListener("keyup",i)}return __extends(e,t),e.prototype.setRule=function(t){this.rule=t,this.input.value=this.rule.getDecimal().toString()},e}(t.EventCreator);e.DecimalInput=n}(e=t.Controls||(t.Controls={}))}(CA||(CA={}));var CA;!function(t){var e=function(){function t(t,e,n){this.id=t,this.event=e,this.callback=n}return t}();t.EventListener=e}(CA||(CA={}));var __extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},CA;!function(t){var e;!function(e){var n=function(t){function e(e){t.call(this),this.state="stopped",this.parent=e,this.target=document.createElement("button"),this.target.className=this.state,this.parent.appendChild(this.target);var n=this;this.target.addEventListener("click",function(){"stopped"===n.state?(n.state="playing",n.fireEvent("play","play")):(n.state="stopped",n.fireEvent("stop","stop")),n.target.className=n.state})}return __extends(e,t),e}(t.EventCreator);e.RunButton=n}(e=t.Controls||(t.Controls={}))}(CA||(CA={}));var CA;!function(t){var e;!function(t){var e=function(){function t(t){this.parent=t,this.canvas=document.createElement("canvas"),this.canvas.width=this.parent.offsetWidth,this.canvas.height=this.parent.offsetHeight,this.parent.appendChild(this.canvas),this.context=this.canvas.getContext("2d")}return t.prototype.setSize=function(t,e){this.canvas.width=t,this.canvas.height=e},t.prototype.clear=function(){this.context.fillStyle="#f00",this.context.fillRect(10,10,this.canvas.width-20,this.canvas.height-20)},t}();t.Canvas=e}(e=t.Renderer||(t.Renderer={}))}(CA||(CA={}));var CA;!function(t){var e;!function(t){var e=function(){function e(e,n){this.rule=n,this.parent=e,this.target=document.createElement("div"),this.parent.appendChild(this.target),this.target.id="ca-renderer",this.canvas=new t.Canvas(this.target)}return e.prototype.setRule=function(t){this.rule=t},e.prototype.start=function(){},e.prototype.stop=function(){},e.prototype.reset=function(){},e}();t.Renderer=e}(e=t.Renderer||(t.Renderer={}))}(CA||(CA={}));